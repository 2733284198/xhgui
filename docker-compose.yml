version: "3.7"

services:
  app:
    build: .
    volumes:
      - ./config:/var/www/xhgui/config
    environment:
      - XHGUI_MONGO_HOST=mongodb://mongo:27017

  web:
    image: nginx:1
    volumes:
      - ./nginx.conf:/etc/nginx/conf.d/default.conf:ro
    ports:
      - "8142:80"

  mongo:
    image: percona/percona-server-mongodb:3.6
    # (case sensitive) engine: mmapv1, rocksdb, wiredTiger, inMemory
    command: --storageEngine=wiredTiger

# vim:ts=2:sw=2:et
